webpackJsonp([0],[,function(e){e.exports=require("react")},,function(e){e.exports=require("prop-types")},function(e){e.exports=require("react-dom")},,function(e,t,a){a(7),e.exports=a(12)},,,function(e){e.exports=require("shallowequal")},function(e){e.exports=require("fast-levenshtein")},function(e){e.exports=require("hoist-non-react-statics")},function(e,t,a){"use strict";(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var n=a(1),r=t(n),l=a(4),o=t(l),s=a(0),u=a(13),d=t(u);o.default.render(r.default.createElement(s.AppContainer,null,r.default.createElement(d.default,null)),document.getElementById("root")),e.hot&&e.hot.accept()}).call(t,a(2)(e))},function(module,exports,__webpack_require__){"use strict";(function(module){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(4),_reactDom2=_interopRequireDefault(_reactDom),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_TextArea=__webpack_require__(14),_TextArea2=_interopRequireDefault(_TextArea),_Button=__webpack_require__(15),_Button2=_interopRequireDefault(_Button),_SvgArea=__webpack_require__(16),_SvgArea2=_interopRequireDefault(_SvgArea),_canvg=__webpack_require__(18),_canvg2=_interopRequireDefault(_canvg),_downloadsFolder=__webpack_require__(23),_downloadsFolder2=_interopRequireDefault(_downloadsFolder),_electronCanvasToBuffer=__webpack_require__(24),_electronCanvasToBuffer2=_interopRequireDefault(_electronCanvasToBuffer),_path=__webpack_require__(25),_path2=_interopRequireDefault(_path),_fs=__webpack_require__(26),_fs2=_interopRequireDefault(_fs),_electron=__webpack_require__(27);(function(){var e=__webpack_require__(0).enterModule;e&&e(module)})();var widthInputArea=350,heightInfoBar=22,repository="https://github.com/sutaking/electron-draw-sequence-diagram",guide="https://bramp.github.io/js-sequence-diagrams/",infoBar={position:"absolute",bottom:"0px",height:heightInfoBar+"px",width:"100%",lineHeight:heightInfoBar+"px",fontSize:"14px",color:"white",backgroundColor:"#2196F3"},App=function(_PureComponent){function App(e){_classCallCheck(this,App);var t=_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).call(this,e));return t.svgDom="",t.downloadImage=t.downloadImage.bind(t),t.handleChange=t.handleChange.bind(t),t.changeTheme=t.changeTheme.bind(t),t.handleOpenUrl=t.handleOpenUrl.bind(t),t.theme=!1,t.state={options:{theme:"simple"},infoText:"Hi, Welcome to use electron draw sequence diagram!",inputTxt:"a->b:c",height:window.innerHeight-heightInfoBar,width:widthInputArea,svgL:widthInputArea+54},t}return _inherits(App,_PureComponent),_createClass(App,[{key:"updateLayout",value:function(){var e=window.innerWidth,t=window.innerHeight;console.log("w:"+e+", h:"+t),this.setState({height:window.innerHeight-heightInfoBar})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateLayout.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateLayout.bind(this))}},{key:"downloadImage",value:function(){var e=this;console.log("-- downloadImage --");var t=_reactDom2.default.findDOMNode(this.svgDom).childNodes[0].outerHTML;(0,_canvg2.default)("canvas",t);var a=(0,_electronCanvasToBuffer2.default)(canvas,"image/png"),n=_path2.default.join((0,_downloadsFolder2.default)(),"/image.png");_fs2.default.writeFile(n,a,function(){console.log(n),e.setState({infoText:"Download file: "+n+" successful."})})}},{key:"handleChange",value:function(e){console.log("-- handleChange --"),this.setState({inputTxt:e.target.value}),console.log(this.state.inputTxt)}},{key:"changeTheme",value:function(){console.log("-- changeTheme --"),this.setState({options:{theme:this.theme?"simple":"hand"},infoText:"Change Theme: "+(this.theme?"Simple":"Hand")}),this.theme=!this.theme}},{key:"handleOpenUrl",value:function(e){console.log("-- handleOpenUrl --"),console.log(e)}},{key:"render",value:function(){var e=this,t=[];return t.push({click:this.downloadImage,icon:"fa-download"}),t.push({click:this.changeTheme,icon:"fa-magic"}),t.push({icon:"fa-plus-circle"}),t.push({icon:"fa-minus-circle"}),t.push({icon:"fa-question",click:function(){return window.open(guide)}}),t.push({click:function(){return _electron.shell.openExternal(repository)},icon:"fa-github"}),_react2.default.createElement("div",{className:"container"},_react2.default.createElement("div",{className:"tool-bar",style:{height:this.state.height+"px"}},t.map(function(e,t){return _react2.default.createElement(_Button2.default,{id:t,key:t,click:e.click,icon:e.icon})})),_react2.default.createElement("div",{className:"item-text",style:{height:this.state.height+"px",width:this.state.width+"px"}},_react2.default.createElement(_TextArea2.default,{value:this.state.inputTxt,onChange:this.handleChange})),_react2.default.createElement("div",{className:"item-svg",style:{left:this.state.svgL+"px",height:this.state.height+"px",width:window.innerWidth-this.state.width-54+"px"}},_react2.default.createElement(_SvgArea2.default,{ref:function(t){e.svgDom=t},text:this.state.inputTxt,opts:this.state.options}),_react2.default.createElement("canvas",{id:"canvas",style:{visibility:"hidden"}})),_react2.default.createElement("div",{style:infoBar},this.state.infoText))}},{key:"__reactstandin__regenerateByEval",value:function(key,code){this[key]=eval(code)}}]),App}(_react.PureComponent),_default=App;exports.default=_default;(function(){var e=__webpack_require__(0).default,t=__webpack_require__(0).leaveModule;e&&(e.register(widthInputArea,"widthInputArea","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/App.jsx"),e.register(heightInfoBar,"heightInfoBar","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/App.jsx"),e.register(repository,"repository","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/App.jsx"),e.register(guide,"guide","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/App.jsx"),e.register(infoBar,"infoBar","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/App.jsx"),e.register(App,"App","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/App.jsx"),e.register(_default,"default","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/App.jsx"),t(module))})()}).call(exports,__webpack_require__(2)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes);(function(){var e=__webpack_require__(0).enterModule;e&&e(module)})();var TextArea=function(_PureComponent){function TextArea(e){return _classCallCheck(this,TextArea),_possibleConstructorReturn(this,(TextArea.__proto__||Object.getPrototypeOf(TextArea)).call(this,e))}return _inherits(TextArea,_PureComponent),_createClass(TextArea,[{key:"render",value:function(){return _react2.default.createElement("textarea",{id:"input1",className:"input-text",cols:"10",rows:"5",onChange:this.props.onChange,value:this.props.value})}},{key:"__reactstandin__regenerateByEval",value:function(key,code){this[key]=eval(code)}}]),TextArea}(_react.PureComponent),_default=TextArea;exports.default=_default;(function(){var e=__webpack_require__(0).default,t=__webpack_require__(0).leaveModule;e&&(e.register(TextArea,"TextArea","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/components/TextArea.jsx"),e.register(_default,"default","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/components/TextArea.jsx"),t(module))})()}).call(exports,__webpack_require__(2)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(4),_reactDom2=_interopRequireDefault(_reactDom),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes);(function(){var e=__webpack_require__(0).enterModule;e&&e(module)})();var btnStyles={fontSize:"28px",textShadow:"1px 1px 1px rgba(0, 0, 0, .75)"},Button=function(_PureComponent){function Button(e){_classCallCheck(this,Button);var t=_possibleConstructorReturn(this,(Button.__proto__||Object.getPrototypeOf(Button)).call(this,e));return t.handleFocus=t.handleFocus.bind(t),t.handleBlur=t.handleBlur.bind(t),t.state={color:"#BBDEFB"},t.positions=[20,70,120,170],t}return _inherits(Button,_PureComponent),_createClass(Button,[{key:"handleFocus",value:function(){this.setState({color:"white"})}},{key:"handleBlur",value:function(){this.setState({color:"#BBDEFB"})}},{key:"render",value:function(){var e={color:this.state.color};return 5===this.props.id?e.bottom="15px":e.top=60*this.props.id+20+"px",_react2.default.createElement("div",{className:"btn-save",style:e,onClick:this.props.click,onMouseEnter:this.handleFocus,onMouseLeave:this.handleBlur},_react2.default.createElement("i",{className:"fa "+this.props.icon,style:btnStyles}))}},{key:"__reactstandin__regenerateByEval",value:function(key,code){this[key]=eval(code)}}]),Button}(_react.PureComponent),_default=Button;exports.default=_default;(function(){var e=__webpack_require__(0).default,t=__webpack_require__(0).leaveModule;e&&(e.register(btnStyles,"btnStyles","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/components/Button.jsx"),e.register(Button,"Button","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/components/Button.jsx"),e.register(_default,"default","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/components/Button.jsx"),t(module))})()}).call(exports,__webpack_require__(2)(module))},function(module,exports,__webpack_require__){"use strict";(function(module){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactSequenceDiagram=__webpack_require__(17),_reactSequenceDiagram2=_interopRequireDefault(_reactSequenceDiagram);(function(){var e=__webpack_require__(0).enterModule;e&&e(module)})();var SvgArea=function(_React$Component){function SvgArea(e){_classCallCheck(this,SvgArea);var t=_possibleConstructorReturn(this,(SvgArea.__proto__||Object.getPrototypeOf(SvgArea)).call(this,e));return t.onError=t.onError.bind(t),t}return _inherits(SvgArea,_React$Component),_createClass(SvgArea,[{key:"onError",value:function(e){console.log(e)}},{key:"shouldComponentUpdate",value:function(e){return console.log(e),!0}},{key:"render",value:function(){return _react2.default.createElement(_reactSequenceDiagram2.default,{input:this.props.text,options:this.props.opts,onError:this.onError})}},{key:"__reactstandin__regenerateByEval",value:function(key,code){this[key]=eval(code)}}]),SvgArea}(_react2.default.Component),_default=SvgArea;exports.default=_default;(function(){var e=__webpack_require__(0).default,t=__webpack_require__(0).leaveModule;e&&(e.register(SvgArea,"SvgArea","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/components/SvgArea.jsx"),e.register(_default,"default","/Users/admin/Documents/18.workSpace/electron-draw-sequence-diagram/app/components/SvgArea.jsx"),t(module))})()}).call(exports,__webpack_require__(2)(module))},function(e){e.exports=require("react-sequence-diagram")},function(e,t,a){var n,r,l;(function(o,s){"use strict";r=[a(19),a(20)],n=s,l="function"==typeof n?n.apply(t,r):n,!(l!==void 0&&(e.exports=l))})("undefined"==typeof window?this:window,function(e,t){function n(){var e;return e=document.createElement("canvas"),e}function r(e){var t=[0,0,0],a=function(a,n){var r=e.match(a);null==r||(t[n]+=r.length,e=e.replace(a," "))};return e=e.replace(/:not\(([^\)]*)\)/g,"     $1 "),e=e.replace(/{[\s\S]*/gm," "),a(c,1),a(f,0),a(g,1),a(x,2),a(b,1),a(v,1),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),a(E,2),t.join("")}function l(a){var l=Math.floor,s=Math.max,u=Math.min,c=Math.sin,y=Math.cos,f=Math.PI,g=Math.sqrt,x=Math.pow,b={opts:a};b.FRAMERATE=30,b.MAX_VIRTUAL_PIXELS=3e4,b.log=function(){},!0==b.opts.log&&"undefined"!=typeof console&&(b.log=function(e){console.log(e)}),b.init=function(e){var t=0;b.UniqueId=function(){return t++,"canvg"+t},b.Definitions={},b.Styles={},b.StylesSpecificity={},b.Animations=[],b.Images=[],b.ctx=e,b.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(e,t){this.viewPorts.push({width:e,height:t})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(e){return null!=e&&"number"==typeof e?e:"x"==e?this.width():"y"==e?this.height():g(x(this.width(),2)+x(this.height(),2))/1.4142135623730951}}},b.init(),b.ImagesLoaded=function(){for(var e=0;e<b.Images.length;e++)if(!b.Images[e].loaded)return!1;return!0},b.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},b.compressSpaces=function(e){return e.replace(/[\s\r\t\n]+/gm," ")},b.ajax=function(e){var t;return t=o.XMLHttpRequest?new o.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t?(t.open("GET",e,!1),t.send(null),t.responseText):null},b.parseXml=function(e){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var t=new Windows.Data.Xml.Dom.XmlDocument,a=new Windows.Data.Xml.Dom.XmlLoadSettings;return a.prohibitDtd=!1,t.loadXml(e,a),t}if(o.DOMParser)try{var n=new o.DOMParser;return n.parseFromString(e,"image/svg+xml")}catch(t){return n=new o.DOMParser,n.parseFromString(e,"text/xml")}else{e=e.replace(/<!DOCTYPE svg[^>]*>/,"");var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}},b.Property=function(e,t){this.name=e,this.value=t},b.Property.prototype.getValue=function(){return this.value},b.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},b.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var e=parseFloat(this.value);return(this.value+"").match(/%$/)&&(e/=100),e},b.Property.prototype.valueOrDefault=function(e){return this.hasValue()?this.value:e},b.Property.prototype.numValueOrDefault=function(e){return this.hasValue()?this.numValue():e},b.Property.prototype.addOpacity=function(t){var a=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var n=new e(this.value);n.ok&&(a="rgba("+n.r+", "+n.g+", "+n.b+", "+t.numValue()+")")}return new b.Property(this.name,a)},b.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=this.value),b.Definitions[e]},b.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},b.Property.prototype.getFillStyleDefinition=function(t,e){var a=this.getDefinition();if(null!=a&&a.createGradient)return a.createGradient(b.ctx,t,e);if(null!=a&&a.createPattern){if(a.getHrefAttribute().hasValue()){var n=a.attribute("patternTransform");a=a.getHrefAttribute().getDefinition(),n.hasValue()&&(a.attribute("patternTransform",!0).value=n.value)}return a.createPattern(b.ctx,t)}return null},b.Property.prototype.getDPI=function(){return 96},b.Property.prototype.getEM=function(e){var t=12,a=new b.Property("fontSize",b.Font.Parse(b.ctx.font).fontSize);return a.hasValue()&&(t=a.toPixels(e)),t},b.Property.prototype.getUnits=function(){var e=this.value+"";return e.replace(/[0-9\.\-]/g,"")},b.Property.prototype.toPixels=function(e,t){if(!this.hasValue())return 0;var a=this.value+"";if(a.match(/em$/))return this.numValue()*this.getEM(e);if(a.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(a.match(/px$/))return this.numValue();if(a.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(a.match(/pc$/))return 15*this.numValue();if(a.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(a.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(a.match(/in$/))return this.numValue()*this.getDPI(e);if(a.match(/%$/))return this.numValue()*b.ViewPort.ComputeSize(e);var r=this.numValue();return t&&1>r?r*b.ViewPort.ComputeSize(e):r},b.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var e=this.value+"";return e.match(/s$/)?1e3*this.numValue():e.match(/ms$/)?this.numValue():this.numValue()},b.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var e=this.value+"";return e.match(/deg$/)?this.numValue()*(f/180):e.match(/grad$/)?this.numValue()*(f/200):e.match(/rad$/)?this.numValue():this.numValue()*(f/180)};var v={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return b.Property.prototype.toTextBaseline=function(){return this.hasValue()?v[this.value]:null},b.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,t,a,n,r,l){var o=null==l?this.CreateFont("","","","","",b.ctx.font):this.Parse(l),r=r||o.fontFamily;if(r){var s=r.trim();"\""!==s[0]&&0<s.indexOf(" ")&&(r="\""+s+"\"")}return{fontFamily:r,fontSize:n||o.fontSize,fontStyle:e||o.fontStyle,fontWeight:a||o.fontWeight,fontVariant:t||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(t){for(var a={},n=b.trim(b.compressSpaces(t||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},l="",o=0;o<n.length;o++)r.fontStyle||-1==e.Styles.indexOf(n[o])?r.fontVariant||-1==e.Variants.indexOf(n[o])?r.fontWeight||-1==e.Weights.indexOf(n[o])?r.fontSize?"inherit"!=n[o]&&(l+=n[o]):("inherit"!=n[o]&&(a.fontSize=n[o].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=n[o]&&(a.fontWeight=n[o]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=n[o]&&(a.fontVariant=n[o]),r.fontStyle=r.fontVariant=!0):("inherit"!=n[o]&&(a.fontStyle=n[o]),r.fontStyle=!0);return""!=l&&(a.fontFamily=l),a}},b.ToNumberArray=function(e){for(var t=b.trim(b.compressSpaces((e||"").replace(/,/g," "))).split(" "),a=0;a<t.length;a++)t[a]=parseFloat(t[a]);return t},b.Point=function(e,t){this.x=e,this.y=t},b.Point.prototype.angleTo=function(e){return Math.atan2(e.y-this.y,e.x-this.x)},b.Point.prototype.applyTransform=function(e){var t=this.x*e[0]+this.y*e[2]+e[4],a=this.x*e[1]+this.y*e[3]+e[5];this.x=t,this.y=a},b.CreatePoint=function(e){var t=b.ToNumberArray(e);return new b.Point(t[0],t[1])},b.CreatePath=function(e){for(var t=b.ToNumberArray(e),a=[],n=0;n<t.length;n+=2)a.push(new b.Point(t[n],t[n+1]));return a},b.BoundingBox=function(e,t,a,n){var r=Number.NaN;this.x1=r,this.y1=r,this.x2=r,this.y2=r,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(e,t){null!=e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},this.addX=function(e){this.addPoint(e,null)},this.addY=function(e){this.addPoint(null,e)},this.addBoundingBox=function(e){this.addPoint(e.x1,e.y1),this.addPoint(e.x2,e.y2)},this.addQuadraticCurve=function(e,t,a,n,r,l){var o=e+2/3*(a-e),s=t+2/3*(n-t);this.addBezierCurve(e,t,o,o+1/3*(r-e),s,s+1/3*(l-t),r,l)},this.addBezierCurve=function(e,n,r,l,o,s,u,d){var p=[e,n],m=[r,l],h=[o,s],y=[u,d];for(this.addPoint(p[0],p[1]),this.addPoint(y[0],y[1]),i=0;1>=i;i++){var v=function(e){return x(1-e,3)*p[i]+3*x(1-e,2)*e*m[i]+3*(1-e)*x(e,2)*h[i]+x(e,3)*y[i]},f=6*p[i]-12*m[i]+6*h[i],E=-3*p[i]+9*m[i]-9*h[i]+3*y[i],a=3*m[i]-3*p[i];if(0==E){if(0==f)continue;var P=-a/f;0<P&&1>P&&(0==i&&this.addX(v(P)),1==i&&this.addY(v(P)));continue}var t=x(f,2)-4*a*E;if(!(0>t)){var B=(-f+g(t))/(2*E);0<B&&1>B&&(0==i&&this.addX(v(B)),1==i&&this.addY(v(B)));var T=(-f-g(t))/(2*E);0<T&&1>T&&(0==i&&this.addX(v(T)),1==i&&this.addY(v(T)))}}},this.isPointInBox=function(e,t){return this.x1<=e&&e<=this.x2&&this.y1<=t&&t<=this.y2},this.addPoint(e,t),this.addPoint(a,n)},b.Transform=function(e){var t=Math.tan,a=this;this.Type={},this.Type.translate=function(e){this.p=b.CreatePoint(e),this.apply=function(e){e.translate(this.p.x||0,this.p.y||0)},this.unapply=function(e){e.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(e){e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var t=b.ToNumberArray(e);this.angle=new b.Property("angle",t[0]),this.cx=t[1]||0,this.cy=t[2]||0,this.apply=function(e){e.translate(this.cx,this.cy),e.rotate(this.angle.toRadians()),e.translate(-this.cx,-this.cy)},this.unapply=function(e){e.translate(this.cx,this.cy),e.rotate(-1*this.angle.toRadians()),e.translate(-this.cx,-this.cy)},this.applyToPoint=function(e){var t=this.angle.toRadians();e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),e.applyTransform([y(t),c(t),-c(t),y(t),0,0]),e.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=b.CreatePoint(e),this.apply=function(e){e.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(e){e.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(e){e.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=b.ToNumberArray(e),this.apply=function(e){e.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var n=this.m[0],a=this.m[2],r=this.m[4],l=this.m[1],o=this.m[3],e=this.m[5],s=0,u=0,d=1,p=1/(n*(o*d-e*u)-a*(l*d-e*s)+r*(l*u-o*s));t.transform(p*(o*d-e*u),p*(e*s-l*d),p*(r*u-a*d),p*(n*d-r*s),p*(a*e-r*o),p*(r*l-n*e))},this.applyToPoint=function(e){e.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=a.Type.matrix,this.base(e),this.angle=new b.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(e){this.base=a.Type.SkewBase,this.base(e),this.m=[1,0,t(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(e){this.base=a.Type.SkewBase,this.base(e),this.m=[1,t(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(e){for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(e)},this.unapply=function(e){for(var t=this.transforms.length-1;0<=t;t--)this.transforms[t].unapply(e)},this.applyToPoint=function(e){for(var t=0;t<this.transforms.length;t++)this.transforms[t].applyToPoint(e)};for(var n=b.trim(b.compressSpaces(e)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<n.length;r++){var l=b.trim(n[r].split("(")[0]),o=n[r].split("(")[1].replace(")",""),s=this.Type[l];if("undefined"!=typeof s){var u=new s(o);u.type=l,this.transforms.push(u)}}},b.AspectRatio=function(e,t,a,n,r,l,o,d,p,m){t=b.compressSpaces(t),t=t.replace(/^defer\s/,"");var h=t.split(" ")[0]||"xMidYMid",c=t.split(" ")[1]||"meet",y=a/n,f=r/l,g=u(y,f),x=s(y,f);"meet"==c&&(n*=g,l*=g),"slice"==c&&(n*=x,l*=x),p=new b.Property("refX",p),m=new b.Property("refY",m),p.hasValue()&&m.hasValue()?e.translate(-g*p.toPixels("x"),-g*m.toPixels("y")):(h.match(/^xMid/)&&("meet"==c&&g==f||"slice"==c&&x==f)&&e.translate(a/2-n/2,0),h.match(/YMid$/)&&("meet"==c&&g==y||"slice"==c&&x==y)&&e.translate(0,r/2-l/2),h.match(/^xMax/)&&("meet"==c&&g==f||"slice"==c&&x==f)&&e.translate(a-n,0),h.match(/YMax$/)&&("meet"==c&&g==y||"slice"==c&&x==y)&&e.translate(0,r-l)),"none"==h?e.scale(y,f):"meet"==c?e.scale(g,g):"slice"==c&&e.scale(x,x),e.translate(null==o?0:-o,null==d?0:-d)},b.Element={},b.EmptyProperty=new b.Property("EMPTY",""),b.Element.ElementBase=function(e){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(e,t){var n=this.attributes[e];return null==n?(!0==t&&(n=new b.Property(e,""),this.attributes[e]=n),n||b.EmptyProperty):n},this.getHrefAttribute=function(){for(var e in this.attributes)if("href"==e||e.match(/:href$/))return this.attributes[e];return b.EmptyProperty},this.style=function(e,t,n){var r=this.styles[e];if(null!=r)return r;var l=this.attribute(e);if(null!=l&&l.hasValue())return this.styles[e]=l,l;if(!0!=n){var a=this.parent;if(null!=a){var o=a.style(e);if(null!=o&&o.hasValue())return o}}return!0==t&&(r=new b.Property(e,""),this.styles[e]=r),r||b.EmptyProperty},this.render=function(e){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(e.save(),this.style("mask").hasValue()){var t=this.style("mask").getDefinition();null!=t&&t.apply(e,this)}else if(this.style("filter").hasValue()){var a=this.style("filter").getDefinition();null!=a&&a.apply(e,this)}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(e){for(var t=0;t<this.children.length;t++)this.children[t].render(e)},this.addChild=function(e,t){var a=e;t&&(a=b.CreateElement(e)),a.parent=this,"title"!=a.type&&this.children.push(a)},this.addStylesFromStyleDefinition=function(){for(var t in b.Styles)if("@"!=t[0]&&h(e,t)){var a=b.Styles[t],n=b.StylesSpecificity[t];if(null!=a)for(var r in a){var l=this.stylesSpecificity[r];"undefined"==typeof l&&(l="000"),n>l&&(this.styles[r]=a[r],this.stylesSpecificity[r]=n)}}};var t=/^[A-Z-]+$/,a=function(e){return t.test(e)?e.toLowerCase():e};if(null!=e&&1==e.nodeType){for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],l=a(r.nodeName);this.attributes[l]=new b.Property(l,r.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var o=this.attribute("style").value.split(";"),n=0;n<o.length;n++)if(""!=b.trim(o[n])){var s=o[n].split(":"),u=b.trim(s[0]),d=b.trim(s[1]);this.styles[u]=new b.Property(u,d)}this.attribute("id").hasValue()&&null==b.Definitions[this.attribute("id").value]&&(b.Definitions[this.attribute("id").value]=this);for(var p,n=0;n<e.childNodes.length;n++)if(p=e.childNodes[n],1==p.nodeType&&this.addChild(p,!0),this.captureTextNodes&&(3==p.nodeType||4==p.nodeType)){var m=p.value||p.text||p.textContent||"";""!=b.compressSpaces(m)&&this.addChild(new b.Element.tspan(p),!1)}}},b.Element.RenderedElementBase=function(e){this.base=b.Element.ElementBase,this.base(e),this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var t=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=t&&(e.fillStyle=t)}else if(this.style("fill").hasValue()){var a=this.style("fill");"currentColor"==a.value&&(a.value=this.style("color").value),"inherit"!=a.value&&(e.fillStyle="none"==a.value?"rgba(0,0,0,0)":a.value)}if(this.style("fill-opacity").hasValue()){var a=new b.Property("fill",e.fillStyle);a=a.addOpacity(this.style("fill-opacity")),e.fillStyle=a.value}if(this.style("stroke").isUrlDefinition()){var t=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=t&&(e.strokeStyle=t)}else if(this.style("stroke").hasValue()){var n=this.style("stroke");"currentColor"==n.value&&(n.value=this.style("color").value),"inherit"!=n.value&&(e.strokeStyle="none"==n.value?"rgba(0,0,0,0)":n.value)}if(this.style("stroke-opacity").hasValue()){var n=new b.Property("stroke",e.strokeStyle);n=n.addOpacity(this.style("stroke-opacity")),e.strokeStyle=n.value}if(this.style("stroke-width").hasValue()){var r=this.style("stroke-width").toPixels();e.lineWidth=0==r?.001:r}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("paint-order").hasValue()&&(e.paintOrder=this.style("paint-order").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var l=b.ToNumberArray(this.style("stroke-dasharray").value);"undefined"==typeof e.setLineDash?"undefined"==typeof e.webkitLineDash?"undefined"!=typeof e.mozDash&&(1!=l.length||0!=l[0])&&(e.mozDash=l):e.webkitLineDash=l:e.setLineDash(l);var o=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"==typeof e.lineDashOffset?"undefined"==typeof e.webkitLineDashOffset?"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=o):e.webkitLineDashOffset=o:e.lineDashOffset=o}if("undefined"!=typeof e.font&&(e.font=b.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var s=new b.Transform(this.style("transform",!1,!0).value);s.apply(e)}if(this.style("clip-path",!1,!0).hasValue()){var u=this.style("clip-path",!1,!0).getDefinition();null!=u&&u.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},b.Element.RenderedElementBase.prototype=new b.Element.ElementBase,b.Element.PathElementBase=function(e){this.base=b.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new b.BoundingBox},this.renderChildren=function(e){this.path(e),b.Mouse.checkPath(this,e),""!=e.fillStyle&&("inherit"==this.style("fill-rule").valueOrDefault("inherit")?e.fill():e.fill(this.style("fill-rule").value)),""!=e.strokeStyle&&e.stroke();var t=this.getMarkers();if(null!=t){if(this.style("marker-start").isUrlDefinition()){var a=this.style("marker-start").getDefinition();a.render(e,t[0][0],t[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var a=this.style("marker-mid").getDefinition(),n=1;n<t.length-1;n++)a.render(e,t[n][0],t[n][1]);if(this.style("marker-end").isUrlDefinition()){var a=this.style("marker-end").getDefinition();a.render(e,t[t.length-1][0],t[t.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},b.Element.PathElementBase.prototype=new b.Element.RenderedElementBase,b.Element.svg=function(e){this.base=b.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),b.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.canvas.style&&"undefined"!=typeof e.font&&"undefined"!=typeof o.getComputedStyle&&(e.font=o.getComputedStyle(e.canvas).getPropertyValue("font")),this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var t=b.ViewPort.width(),a=b.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){t=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");var n=0,r=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(n=-this.attribute("refX").toPixels("x"),r=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(e.beginPath(),e.moveTo(n,r),e.lineTo(t,r),e.lineTo(t,a),e.lineTo(n,a),e.closePath(),e.clip())}if(b.ViewPort.SetCurrent(t,a),this.attribute("viewBox").hasValue()){var l=b.ToNumberArray(this.attribute("viewBox").value),s=l[0],u=l[1];t=l[2],a=l[3],b.AspectRatio(e,this.attribute("preserveAspectRatio").value,b.ViewPort.width(),t,b.ViewPort.height(),a,s,u,this.attribute("refX").value,this.attribute("refY").value),b.ViewPort.RemoveCurrent(),b.ViewPort.SetCurrent(l[2],l[3])}}},b.Element.svg.prototype=new b.Element.RenderedElementBase,b.Element.rect=function(e){this.base=b.Element.PathElementBase,this.base(e),this.path=function(e){var t=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),l=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=l),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(l=o),l=u(l,n/2),o=u(o,r/2),null!=e&&(e.beginPath(),e.moveTo(t+l,a),e.lineTo(t+n-l,a),e.quadraticCurveTo(t+n,a,t+n,a+o),e.lineTo(t+n,a+r-o),e.quadraticCurveTo(t+n,a+r,t+n-l,a+r),e.lineTo(t+l,a+r),e.quadraticCurveTo(t,a+r,t,a+r-o),e.lineTo(t,a+o),e.quadraticCurveTo(t,a,t+l,a),e.closePath()),new b.BoundingBox(t,a,t+n,a+r)}},b.Element.rect.prototype=new b.Element.PathElementBase,b.Element.circle=function(e){this.base=b.Element.PathElementBase,this.base(e),this.path=function(e){var t=this.attribute("cx").toPixels("x"),a=this.attribute("cy").toPixels("y"),n=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(t,a,n,0,2*f,!0),e.closePath()),new b.BoundingBox(t-n,a-n,t+n,a+n)}},b.Element.circle.prototype=new b.Element.PathElementBase,b.Element.ellipse=function(e){this.base=b.Element.PathElementBase,this.base(e),this.path=function(e){var t=4*((1.4142135623730951-1)/3),a=this.attribute("rx").toPixels("x"),n=this.attribute("ry").toPixels("y"),r=this.attribute("cx").toPixels("x"),l=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(r,l-n),e.bezierCurveTo(r+t*a,l-n,r+a,l-t*n,r+a,l),e.bezierCurveTo(r+a,l+t*n,r+t*a,l+n,r,l+n),e.bezierCurveTo(r-t*a,l+n,r-a,l+t*n,r-a,l),e.bezierCurveTo(r-a,l-t*n,r-t*a,l-n,r,l-n),e.closePath()),new b.BoundingBox(r-a,l-n,r+a,l+n)}},b.Element.ellipse.prototype=new b.Element.PathElementBase,b.Element.line=function(e){this.base=b.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new b.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new b.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var t=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y)),new b.BoundingBox(t[0].x,t[0].y,t[1].x,t[1].y)},this.getMarkers=function(){var e=this.getPoints(),t=e[0].angleTo(e[1]);return[[e[0],t],[e[1],t]]}},b.Element.line.prototype=new b.Element.PathElementBase,b.Element.polyline=function(e){this.base=b.Element.PathElementBase,this.base(e),this.points=b.CreatePath(this.attribute("points").value),this.path=function(e){var t=new b.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var a=1;a<this.points.length;a++)t.addPoint(this.points[a].x,this.points[a].y),null!=e&&e.lineTo(this.points[a].x,this.points[a].y);return t},this.getMarkers=function(){for(var e=[],t=0;t<this.points.length-1;t++)e.push([this.points[t],this.points[t].angleTo(this.points[t+1])]);return 0<e.length&&e.push([this.points[this.points.length-1],e[e.length-1][1]]),e}},b.Element.polyline.prototype=new b.Element.PathElementBase,b.Element.polygon=function(e){this.base=b.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(e){var t=this.basePath(e);return null!=e&&(e.lineTo(this.points[0].x,this.points[0].y),e.closePath()),t}},b.Element.polygon.prototype=new b.Element.polyline,b.Element.path=function(e){this.base=b.Element.PathElementBase,this.base(e);var t=this.attribute("d").value;t=t.replace(/,/gm," ");for(var a=0;2>a;a++)t=t.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");t=t.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2");for(var a=0;2>a;a++)t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=b.compressSpaces(t),t=b.trim(t),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new b.Point(0,0),this.control=new b.Point(0,0),this.current=new b.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0;}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new b.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var e=this.getPoint();return this.control=e,e},this.getAsCurrentPoint=function(){var e=this.getPoint();return this.current=e,e},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var e=new b.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return e},this.makeAbsolute=function(e){return this.isRelativeCommand()&&(e.x+=this.current.x,e.y+=this.current.y),e},this.addMarker=function(e,t,a){null!=a&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(a)),this.addMarkerAngle(e,null==t?null:t.angleTo(e))},this.addMarkerAngle=function(e,t){this.points.push(e),this.angles.push(t)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var e=0;e<this.angles.length;e++)if(null==this.angles[e])for(var t=e+1;t<this.angles.length;t++)if(null!=this.angles[t]){this.angles[e]=this.angles[t];break}return this.angles}}(t),this.path=function(e){var t=this.PathParser;t.reset();var n=new b.BoundingBox;for(null!=e&&e.beginPath();!t.isEnd();)switch(t.nextCommand(),t.command){case"M":case"m":var o=t.getAsCurrentPoint();for(t.addMarker(o),n.addPoint(o.x,o.y),null!=e&&e.moveTo(o.x,o.y),t.start=t.current;!t.isCommandOrEnd();){var o=t.getAsCurrentPoint();t.addMarker(o,t.start),n.addPoint(o.x,o.y),null!=e&&e.lineTo(o.x,o.y)}break;case"L":case"l":for(;!t.isCommandOrEnd();){var d=t.current,o=t.getAsCurrentPoint();t.addMarker(o,d),n.addPoint(o.x,o.y),null!=e&&e.lineTo(o.x,o.y)}break;case"H":case"h":for(;!t.isCommandOrEnd();){var p=new b.Point((t.isRelativeCommand()?t.current.x:0)+t.getScalar(),t.current.y);t.addMarker(p,t.current),t.current=p,n.addPoint(t.current.x,t.current.y),null!=e&&e.lineTo(t.current.x,t.current.y)}break;case"V":case"v":for(;!t.isCommandOrEnd();){var p=new b.Point(t.current.x,(t.isRelativeCommand()?t.current.y:0)+t.getScalar());t.addMarker(p,t.current),t.current=p,n.addPoint(t.current.x,t.current.y),null!=e&&e.lineTo(t.current.x,t.current.y)}break;case"C":case"c":for(;!t.isCommandOrEnd();){var h=t.current,E=t.getPoint(),P=t.getAsControlPoint(),B=t.getAsCurrentPoint();t.addMarker(B,P,E),n.addBezierCurve(h.x,h.y,E.x,E.y,P.x,P.y,B.x,B.y),null!=e&&e.bezierCurveTo(E.x,E.y,P.x,P.y,B.x,B.y)}break;case"S":case"s":for(;!t.isCommandOrEnd();){var h=t.current,E=t.getReflectedControlPoint(),P=t.getAsControlPoint(),B=t.getAsCurrentPoint();t.addMarker(B,P,E),n.addBezierCurve(h.x,h.y,E.x,E.y,P.x,P.y,B.x,B.y),null!=e&&e.bezierCurveTo(E.x,E.y,P.x,P.y,B.x,B.y)}break;case"Q":case"q":for(;!t.isCommandOrEnd();){var h=t.current,P=t.getAsControlPoint(),B=t.getAsCurrentPoint();t.addMarker(B,P,P),n.addQuadraticCurve(h.x,h.y,P.x,P.y,B.x,B.y),null!=e&&e.quadraticCurveTo(P.x,P.y,B.x,B.y)}break;case"T":case"t":for(;!t.isCommandOrEnd();){var h=t.current,P=t.getReflectedControlPoint();t.control=P;var B=t.getAsCurrentPoint();t.addMarker(B,P,P),n.addQuadraticCurve(h.x,h.y,P.x,P.y,B.x,B.y),null!=e&&e.quadraticCurveTo(P.x,P.y,B.x,B.y)}break;case"A":case"a":for(;!t.isCommandOrEnd();){var h=t.current,T=t.getScalar(),C=t.getScalar(),w=t.getScalar()*(f/180),S=t.getScalar(),k=t.getScalar(),B=t.getAsCurrentPoint(),V=new b.Point(y(w)*(h.x-B.x)/2+c(w)*(h.y-B.y)/2,-c(w)*(h.x-B.x)/2+y(w)*(h.y-B.y)/2),D=x(V.x,2)/x(T,2)+x(V.y,2)/x(C,2);1<D&&(T*=g(D),C*=g(D));var l=(S==k?-1:1)*g((x(T,2)*x(C,2)-x(T,2)*x(V.y,2)-x(C,2)*x(V.x,2))/(x(T,2)*x(V.y,2)+x(C,2)*x(V.x,2)));isNaN(l)&&(l=0);var s=new b.Point(l*T*V.y/C,l*-C*V.x/T),A=new b.Point((h.x+B.x)/2+y(w)*s.x-c(w)*s.y,(h.y+B.y)/2+c(w)*s.x+y(w)*s.y),M=function(e){return g(x(e[0],2)+x(e[1],2))},m=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(M(e)*M(t))},r=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(m(e,t))},a=r([1,0],[(V.x-s.x)/T,(V.y-s.y)/C]),R=[(V.x-s.x)/T,(V.y-s.y)/C],u=[(-V.x-s.x)/T,(-V.y-s.y)/C],v=r(R,u);-1>=m(R,u)&&(v=f),1<=m(R,u)&&(v=0);var O=1-k?1:-1,_=a+O*(v/2),I=new b.Point(A.x+T*y(_),A.y+C*c(_));if(t.addMarkerAngle(I,_-O*f/2),t.addMarkerAngle(B,_-O*f),n.addPoint(B.x,B.y),null!=e){var m=T>C?T:C,z=T>C?1:T/C,X=T>C?C/T:1;e.translate(A.x,A.y),e.rotate(w),e.scale(z,X),e.arc(0,0,m,a,a+v,1-k),e.scale(1/z,1/X),e.rotate(-w),e.translate(-A.x,-A.y)}}break;case"Z":case"z":null!=e&&e.closePath(),t.current=t.start;}return n},this.getMarkers=function(){for(var e=this.PathParser.getMarkerPoints(),t=this.PathParser.getMarkerAngles(),a=[],n=0;n<e.length;n++)a.push([e[n],t[n]]);return a}},b.Element.path.prototype=new b.Element.PathElementBase,b.Element.pattern=function(e){this.base=b.Element.ElementBase,this.base(e),this.createPattern=function(e){var t=this.attribute("width").toPixels("x",!0),a=this.attribute("height").toPixels("y",!0),r=new b.Element.svg;r.attributes.viewBox=new b.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new b.Property("width",t+"px"),r.attributes.height=new b.Property("height",a+"px"),r.attributes.transform=new b.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var l=n();l.width=t,l.height=a;var o=l.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&o.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var s=-1;1>=s;s++)for(var u=-1;1>=u;u++)o.save(),r.attributes.x=new b.Property("x",s*l.width),r.attributes.y=new b.Property("y",u*l.height),r.render(o),o.restore();var d=e.createPattern(l,"repeat");return d}},b.Element.pattern.prototype=new b.Element.ElementBase,b.Element.marker=function(e){this.base=b.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,t,a){e.translate(t.x,t.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(a),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var n=new b.Element.svg;n.attributes.viewBox=new b.Property("viewBox",this.attribute("viewBox").value),n.attributes.refX=new b.Property("refX",this.attribute("refX").value),n.attributes.refY=new b.Property("refY",this.attribute("refY").value),n.attributes.width=new b.Property("width",this.attribute("markerWidth").value),n.attributes.height=new b.Property("height",this.attribute("markerHeight").value),n.attributes.fill=new b.Property("fill",this.attribute("fill").valueOrDefault("black")),n.attributes.stroke=new b.Property("stroke",this.attribute("stroke").valueOrDefault("none")),n.children=this.children,n.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-a),e.translate(-t.x,-t.y)}},b.Element.marker.prototype=new b.Element.ElementBase,b.Element.defs=function(e){this.base=b.Element.ElementBase,this.base(e),this.render=function(){}},b.Element.defs.prototype=new b.Element.ElementBase,b.Element.GradientBase=function(e){this.base=b.Element.ElementBase,this.base(e),this.stops=[];for(var t,a=0;a<this.children.length;a++)t=this.children[a],"stop"==t.type&&this.stops.push(t);this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(e){for(var t,a=0;a<this.attributesToInherit.length;a++)t=this.attributesToInherit[a],!this.attribute(t).hasValue()&&e.attribute(t).hasValue()&&(this.attribute(t,!0).value=e.attribute(t).value)},this.createGradient=function(e,t,a){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(r));var l=function(e){if(a.hasValue()){var t=new b.Property("color",e);return t.addOpacity(a).value}return e},o=this.getGradient(e,t);if(null==o)return l(r.stops[r.stops.length-1].color);for(var s=0;s<r.stops.length;s++)o.addColorStop(r.stops[s].offset,l(r.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var u=b.ViewPort.viewPorts[0],d=new b.Element.rect;d.attributes.x=new b.Property("x",-b.MAX_VIRTUAL_PIXELS/3),d.attributes.y=new b.Property("y",-b.MAX_VIRTUAL_PIXELS/3),d.attributes.width=new b.Property("width",b.MAX_VIRTUAL_PIXELS),d.attributes.height=new b.Property("height",b.MAX_VIRTUAL_PIXELS);var p=new b.Element.g;p.attributes.transform=new b.Property("transform",this.attribute("gradientTransform").value),p.children=[d];var m=new b.Element.svg;m.attributes.x=new b.Property("x",0),m.attributes.y=new b.Property("y",0),m.attributes.width=new b.Property("width",u.width),m.attributes.height=new b.Property("height",u.height),m.children=[p];var h=n();h.width=u.width,h.height=u.height;var c=h.getContext("2d");return c.fillStyle=o,m.render(c),c.createPattern(h,"no-repeat")}return o}},b.Element.GradientBase.prototype=new b.Element.ElementBase,b.Element.linearGradient=function(e){this.base=b.Element.GradientBase,this.base(e),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(e,t){var a="objectBoundingBox"==this.gradientUnits()?t.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var n="objectBoundingBox"==this.gradientUnits()?a.x()+a.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?a.y()+a.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),l="objectBoundingBox"==this.gradientUnits()?a.x()+a.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits()?a.y()+a.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return n==l&&r==o?null:e.createLinearGradient(n,r,l,o)}},b.Element.linearGradient.prototype=new b.Element.GradientBase,b.Element.radialGradient=function(e){this.base=b.Element.GradientBase,this.base(e),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(e,t){var a=t.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var n="objectBoundingBox"==this.gradientUnits()?a.x()+a.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),l="objectBoundingBox"==this.gradientUnits()?a.y()+a.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),o=n,s=l;this.attribute("fx").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?a.x()+a.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(s="objectBoundingBox"==this.gradientUnits()?a.y()+a.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var u="objectBoundingBox"==this.gradientUnits()?(a.width()+a.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return e.createRadialGradient(o,s,0,n,l,u)}},b.Element.radialGradient.prototype=new b.Element.GradientBase,b.Element.stop=function(e){this.base=b.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),0>this.offset&&(this.offset=0),1<this.offset&&(this.offset=1);var t=this.style("stop-color",!0);""===t.value&&(t.value="#000"),this.style("stop-opacity").hasValue()&&(t=t.addOpacity(this.style("stop-opacity"))),this.color=t.value},b.Element.stop.prototype=new b.Element.ElementBase,b.Element.AnimateBase=function(e){this.base=b.Element.ElementBase,this.base(e),b.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var e=this.attribute("attributeType").value,t=this.attribute("attributeName").value;return"CSS"==e?this.parent.style(t,!0):this.parent.attribute(t,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(e){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"==this.attribute("fill").valueOrDefault("remove")&&!this.frozen)this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;else if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0;return!1}this.duration+=e;var t=!1;if(this.begin<this.duration){var a=this.calcValue();if(this.attribute("type").hasValue()){var n=this.attribute("type").value;a=n+"("+a+")"}this.getProperty().value=a,t=!0}return t},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var t=e.progress*(this.values.value.length-1),a=l(t),n=Math.ceil(t);e.from=new b.Property("from",parseFloat(this.values.value[a])),e.to=new b.Property("to",parseFloat(this.values.value[n])),e.progress=(t-a)/(n-a)}else e.from=this.from,e.to=this.to;return e}},b.Element.AnimateBase.prototype=new b.Element.ElementBase,b.Element.animate=function(e){this.base=b.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),t=e.from.numValue()+(e.to.numValue()-e.from.numValue())*e.progress;return t+this.initialUnits}},b.Element.animate.prototype=new b.Element.AnimateBase,b.Element.animateColor=function(t){this.base=b.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),a=new e(t.from.value),n=new e(t.to.value);if(a.ok&&n.ok){var l=a.r+(n.r-a.r)*t.progress,r=a.g+(n.g-a.g)*t.progress,o=a.b+(n.b-a.b)*t.progress;return"rgb("+parseInt(l,10)+","+parseInt(r,10)+","+parseInt(o,10)+")"}return this.attribute("from").value}},b.Element.animateColor.prototype=new b.Element.AnimateBase,b.Element.animateTransform=function(e){this.base=b.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),t=b.ToNumberArray(e.from.value),a=b.ToNumberArray(e.to.value),n="",r=0;r<t.length;r++)n+=t[r]+(a[r]-t[r])*e.progress+" ";return n}},b.Element.animateTransform.prototype=new b.Element.animate,b.Element.font=function(e){this.base=b.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var t,a=0;a<this.children.length;a++)t=this.children[a],"font-face"==t.type?(this.fontFace=t,t.style("font-family").hasValue()&&(b.Definitions[t.style("font-family").value]=this)):"missing-glyph"==t.type?this.missingGlyph=t:"glyph"==t.type&&(""==t.arabicForm?this.glyphs[t.unicode]=t:(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[t.unicode]&&(this.glyphs[t.unicode]=[]),this.glyphs[t.unicode][t.arabicForm]=t))},b.Element.font.prototype=new b.Element.ElementBase,b.Element.fontface=function(e){this.base=b.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},b.Element.fontface.prototype=new b.Element.ElementBase,b.Element.missingglyph=function(e){this.base=b.Element.path,this.base(e),this.horizAdvX=0},b.Element.missingglyph.prototype=new b.Element.path,b.Element.glyph=function(e){this.base=b.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},b.Element.glyph.prototype=new b.Element.path,b.Element.text=function(e){this.captureTextNodes=!0,this.base=b.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){this.baseSetContext(e);var t=this.style("dominant-baseline").toTextBaseline();null==t&&(t=this.style("alignment-baseline").toTextBaseline()),null!=t&&(e.textBaseline=t)},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),t=this.attribute("y").toPixels("y"),a=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize);return new b.BoundingBox(e,t-a,e+l(2*a/3)*this.children[0].getText().length,t)},this.renderChildren=function(e){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(e,this,0);for(var t=0;t<this.children.length;t++)this.renderChild(e,this,this,t)},this.getAnchorDelta=function(e,t,a){var n=this.style("text-anchor").valueOrDefault("start");if("start"!=n){for(var r,l=0,o=a;o<t.children.length&&(r=t.children[o],!(o>a&&r.attribute("x").hasValue()));o++)l+=r.measureTextRecursive(e);return-1*("end"==n?l:l/2)}return 0},this.renderChild=function(e,t,a,n){var r=a.children[n];r.attribute("x").hasValue()?(r.x=r.attribute("x").toPixels("x")+t.getAnchorDelta(e,a,n),r.attribute("dx").hasValue()&&(r.x+=r.attribute("dx").toPixels("x"))):(r.attribute("dx").hasValue()&&(t.x+=r.attribute("dx").toPixels("x")),r.x=t.x),t.x=r.x+r.measureText(e),r.attribute("y").hasValue()?(r.y=r.attribute("y").toPixels("y"),r.attribute("dy").hasValue()&&(r.y+=r.attribute("dy").toPixels("y"))):(r.attribute("dy").hasValue()&&(t.y+=r.attribute("dy").toPixels("y")),r.y=t.y),t.y=r.y,r.render(e);for(var n=0;n<r.children.length;n++)t.renderChild(e,t,r,n)}},b.Element.text.prototype=new b.Element.RenderedElementBase,b.Element.TextElementBase=function(e){this.base=b.Element.RenderedElementBase,this.base(e),this.getGlyph=function(e,t,a){var n=t[a],r=null;if(e.isArabic){var l="isolated";(0==a||" "==t[a-1])&&a<t.length-2&&" "!=t[a+1]&&(l="terminal"),0<a&&" "!=t[a-1]&&a<t.length-2&&" "!=t[a+1]&&(l="medial"),0<a&&" "!=t[a-1]&&(a==t.length-1||" "==t[a+1])&&(l="initial"),"undefined"!=typeof e.glyphs[n]&&(r=e.glyphs[n][l],null==r&&"glyph"==e.glyphs[n].type&&(r=e.glyphs[n]))}else r=e.glyphs[n];return null==r&&(r=e.missingGlyph),r},this.renderChildren=function(e){var t=this.parent.style("font-family").getDefinition();if(null!=t){var a=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize),n=this.parent.style("font-style").valueOrDefault(b.Font.Parse(b.ctx.font).fontStyle),r=this.getText();t.isRTL&&(r=r.split("").reverse().join(""));for(var l=b.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var s=this.getGlyph(t,r,o),u=a/t.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(u,-u);var d=e.lineWidth;e.lineWidth=e.lineWidth*t.fontFace.unitsPerEm/a,"italic"==n&&e.transform(1,0,.4,1,0,0),s.render(e),"italic"==n&&e.transform(1,0,-.4,1,0,0),e.lineWidth=d,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=a*(s.horizAdvX||t.horizAdvX)/t.fontFace.unitsPerEm,"undefined"==typeof l[o]||isNaN(l[o])||(this.x+=l[o])}return}"stroke"==e.paintOrder?(""!=e.strokeStyle&&e.strokeText(b.compressSpaces(this.getText()),this.x,this.y),""!=e.fillStyle&&e.fillText(b.compressSpaces(this.getText()),this.x,this.y)):(""!=e.fillStyle&&e.fillText(b.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(b.compressSpaces(this.getText()),this.x,this.y))},this.getText=function(){},this.measureTextRecursive=function(e){for(var t=this.measureText(e),a=0;a<this.children.length;a++)t+=this.children[a].measureTextRecursive(e);return t},this.measureText=function(e){var t=this.parent.style("font-family").getDefinition();if(null!=t){var a=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize),n=0,r=this.getText();t.isRTL&&(r=r.split("").reverse().join(""));for(var l,o=b.ToNumberArray(this.parent.attribute("dx").value),s=0;s<r.length;s++)l=this.getGlyph(t,r,s),n+=(l.horizAdvX||t.horizAdvX)*a/t.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(n+=o[s]);return n}var u=b.compressSpaces(this.getText());if(!e.measureText)return 10*u.length;e.save(),this.setContext(e);var d=e.measureText(u).width;return e.restore(),d}},b.Element.TextElementBase.prototype=new b.Element.RenderedElementBase,b.Element.tspan=function(e){this.captureTextNodes=!0,this.base=b.Element.TextElementBase,this.base(e),this.text=b.compressSpaces(e.value||e.text||e.textContent||""),this.getText=function(){return 0<this.children.length?"":this.text}},b.Element.tspan.prototype=new b.Element.TextElementBase,b.Element.tref=function(e){this.base=b.Element.TextElementBase,this.base(e),this.getText=function(){var e=this.getHrefAttribute().getDefinition();if(null!=e)return e.children[0].getText()}},b.Element.tref.prototype=new b.Element.TextElementBase,b.Element.a=function(e){this.base=b.Element.TextElementBase,this.base(e),this.hasText=0<e.childNodes.length;for(var t=0;t<e.childNodes.length;t++)3!=e.childNodes[t].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].value||e.childNodes[0].data:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var t=new b.Property("fontSize",b.Font.Parse(b.ctx.font).fontSize);b.Mouse.checkBoundingBox(this,new b.BoundingBox(this.x,this.y-t.toPixels("y"),this.x+this.measureText(e),this.y))}else if(0<this.children.length){var a=new b.Element.g;a.children=this.children,a.parent=this,a.render(e)}},this.onclick=function(){o.open(this.getHrefAttribute().value)},this.onmousemove=function(){b.ctx.canvas.style.cursor="pointer"}},b.Element.a.prototype=new b.Element.TextElementBase,b.Element.image=function(e){this.base=b.Element.RenderedElementBase,this.base(e);var t=this.getHrefAttribute().value;if(""!=t){var a=t.match(/\.svg$/);if(b.Images.push(this),this.loaded=!1,!a){this.img=document.createElement("img"),!0==b.opts.useCORS&&(this.img.crossOrigin="Anonymous");var n=this;this.img.onload=function(){n.loaded=!0},this.img.onerror=function(){b.log("ERROR: image \""+t+"\" not found"),n.loaded=!0},this.img.src=t}else this.img=b.ajax(t),this.loaded=!0;this.renderChildren=function(e){var t=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),l=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");0==l||0==o||(e.save(),a?e.drawSvg(this.img,t,r,l,o):(e.translate(t,r),b.AspectRatio(e,this.attribute("preserveAspectRatio").value,l,this.img.width,o,this.img.height,0,0),n.loaded&&(void 0===this.img.complete||this.img.complete)&&e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),t=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");return new b.BoundingBox(e,t,e+a,t+n)}}},b.Element.image.prototype=new b.Element.RenderedElementBase,b.Element.g=function(e){this.base=b.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new b.BoundingBox,t=0;t<this.children.length;t++)e.addBoundingBox(this.children[t].getBoundingBox());return e}},b.Element.g.prototype=new b.Element.RenderedElementBase,b.Element.symbol=function(e){this.base=b.Element.RenderedElementBase,this.base(e),this.render=function(){}},b.Element.symbol.prototype=new b.Element.RenderedElementBase,b.Element.style=function(e){this.base=b.Element.ElementBase,this.base(e);for(var t="",a=0;a<e.childNodes.length;a++)t+=e.childNodes[a].data;t=t.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),t=b.compressSpaces(t);for(var n=t.split("}"),a=0;a<n.length;a++)if(""!=b.trim(n[a]))for(var l,o=n[a].split("{"),u=o[0].split(","),p=o[1].split(";"),m=0;m<u.length;m++)if(l=b.trim(u[m]),""!=l){for(var h=b.Styles[l]||{},c=0;c<p.length;c++){var y=p[c].indexOf(":"),g=p[c].substr(0,y),x=p[c].substr(y+1,p[c].length-y);null!=g&&null!=x&&(h[b.trim(g)]=new b.Property(b.trim(g),b.trim(x)))}if(b.Styles[l]=h,b.StylesSpecificity[l]=r(l),"@font-face"==l&&!d)for(var v=h["font-family"].value.replace(/"/g,""),E=h.src.value.split(","),P=0;P<E.length;P++)if(0<E[P].indexOf("format(\"svg\")"))for(var s,B=E[P].indexOf("url"),T=E[P].indexOf(")",B),C=E[P].substr(B+5,T-B-6),w=b.parseXml(b.ajax(C)),S=w.getElementsByTagName("font"),k=0;k<S.length;k++)s=b.CreateElement(S[k]),b.Definitions[v]=s}},b.Element.style.prototype=new b.Element.ElementBase,b.Element.use=function(e){this.base=b.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){this.baseSetContext(e),this.attribute("x").hasValue()&&e.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&e.translate(0,this.attribute("y").toPixels("y"))};var t=this.getHrefAttribute().getDefinition();this.path=function(e){null!=t&&t.path(e)},this.getBoundingBox=function(){if(null!=t)return t.getBoundingBox()},this.renderChildren=function(e){if(null!=t){var a=t;"symbol"==t.type&&(a=new b.Element.svg,a.type="svg",a.attributes.viewBox=new b.Property("viewBox",t.attribute("viewBox").value),a.attributes.preserveAspectRatio=new b.Property("preserveAspectRatio",t.attribute("preserveAspectRatio").value),a.attributes.overflow=new b.Property("overflow",t.attribute("overflow").value),a.children=t.children),"svg"==a.type&&(this.attribute("width").hasValue()&&(a.attributes.width=new b.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(a.attributes.height=new b.Property("height",this.attribute("height").value)));var n=a.parent;a.parent=null,a.render(e),a.parent=n}}},b.Element.use.prototype=new b.Element.RenderedElementBase,b.Element.mask=function(e){this.base=b.Element.ElementBase,this.base(e),this.apply=function(e,t){var a=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),o=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==o&&0==s){for(var u=new b.BoundingBox,d=0;d<this.children.length;d++)u.addBoundingBox(this.children[d].getBoundingBox());var a=l(u.x1),r=l(u.y1),o=l(u.width()),s=l(u.height())}var p=t.attribute("mask").value;t.attribute("mask").value="";var m=n();m.width=a+o,m.height=r+s;var h=m.getContext("2d");this.renderChildren(h);var y=n();y.width=a+o,y.height=r+s;var c=y.getContext("2d");t.render(c),c.globalCompositeOperation="destination-in",c.fillStyle=h.createPattern(m,"no-repeat"),c.fillRect(0,0,a+o,r+s),e.fillStyle=c.createPattern(y,"no-repeat"),e.fillRect(0,0,a+o,r+s),t.attribute("mask").value=p},this.render=function(){}},b.Element.mask.prototype=new b.Element.ElementBase,b.Element.clipPath=function(e){this.base=b.Element.ElementBase,this.base(e),this.apply=function(e){var t="undefined"!=typeof CanvasRenderingContext2D,a=e.beginPath,n=e.closePath;t&&(CanvasRenderingContext2D.prototype.beginPath=function(){},CanvasRenderingContext2D.prototype.closePath=function(){}),a.call(e);for(var r,l=0;l<this.children.length;l++)if(r=this.children[l],"undefined"!=typeof r.path){var o=null;r.style("transform",!1,!0).hasValue()&&(o=new b.Transform(r.style("transform",!1,!0).value),o.apply(e)),r.path(e),t&&(CanvasRenderingContext2D.prototype.closePath=n),o&&o.unapply(e)}n.call(e),e.clip(),t&&(CanvasRenderingContext2D.prototype.beginPath=a,CanvasRenderingContext2D.prototype.closePath=n)},this.render=function(){}},b.Element.clipPath.prototype=new b.Element.ElementBase,b.Element.filter=function(e){this.base=b.Element.ElementBase,this.base(e),this.apply=function(e,t){var a=t.getBoundingBox(),r=l(a.x1),o=l(a.y1),u=l(a.width()),d=l(a.height()),p=t.style("filter").value;t.style("filter").value="";for(var m,h=0,f=0,g=0;g<this.children.length;g++)m=this.children[g].extraFilterDistance||0,h=s(h,m),f=s(f,m);var b=n();b.width=u+2*h,b.height=d+2*f;var c=b.getContext("2d");c.translate(-r+h,-o+f),t.render(c);for(var g=0;g<this.children.length;g++)"function"==typeof this.children[g].apply&&this.children[g].apply(c,0,0,u+2*h,d+2*f);e.drawImage(b,0,0,u+2*h,d+2*f,r-h,o-f,u+2*h,d+2*f),t.style("filter",!0).value=p},this.render=function(){}},b.Element.filter.prototype=new b.Element.ElementBase,b.Element.feMorphology=function(e){this.base=b.Element.ElementBase,this.base(e),this.apply=function(){}},b.Element.feMorphology.prototype=new b.Element.ElementBase,b.Element.feComposite=function(e){this.base=b.Element.ElementBase,this.base(e),this.apply=function(){}},b.Element.feComposite.prototype=new b.Element.ElementBase,b.Element.feColorMatrix=function(e){function t(e,t,a,n,r,l){return e[4*(a*n)+4*t+l]}function n(e,t,a,n,r,l,o){e[4*(a*n)+4*t+l]=o}function l(e,t){var a=r[e];return a*(0>a?t-255:t)}this.base=b.Element.ElementBase,this.base(e);var r=b.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var o=r[0];r=[.213+.787*o,.715-.715*o,.072-.072*o,0,0,.213-.213*o,.715+.285*o,.072-.072*o,0,0,.213-.213*o,.715-.715*o,.072+.928*o,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var s=r[0]*f/180,a=function(e,t,a){return e+y(s)*t+c(s)*a};r=[a(.213,.787,-.213),a(.715,-.715,-.715),a(.072,-.072,.928),0,0,a(.213,-.213,.143),a(.715,.285,.14),a(.072,-.072,-.283),0,0,a(.213,-.213,-.787),a(.715,-.715,.715),a(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];}this.apply=function(e,o,s,u,d){for(var p=e.getImageData(0,0,u,d),s=0;s<d;s++)for(var o=0;o<u;o++){var m=t(p.data,o,s,u,d,0),r=t(p.data,o,s,u,d,1),h=t(p.data,o,s,u,d,2),c=t(p.data,o,s,u,d,3);n(p.data,o,s,u,d,0,l(0,m)+l(1,r)+l(2,h)+l(3,c)+l(4,1)),n(p.data,o,s,u,d,1,l(5,m)+l(6,r)+l(7,h)+l(8,c)+l(9,1)),n(p.data,o,s,u,d,2,l(10,m)+l(11,r)+l(12,h)+l(13,c)+l(14,1)),n(p.data,o,s,u,d,3,l(15,m)+l(16,r)+l(17,h)+l(18,c)+l(19,1))}e.clearRect(0,0,u,d),e.putImageData(p,0,0)}},b.Element.feColorMatrix.prototype=new b.Element.ElementBase,b.Element.feGaussianBlur=function(e){this.base=b.Element.ElementBase,this.base(e),this.blurRadius=l(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,a,n,r,l){return"undefined"==typeof t.canvasRGBA?void b.log("ERROR: StackBlur.js must be included for blur to work"):void(e.canvas.id=b.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),t.canvasRGBA(e.canvas.id,a,n,r,l,this.blurRadius),document.body.removeChild(e.canvas))}},b.Element.feGaussianBlur.prototype=new b.Element.ElementBase,b.Element.title=function(){},b.Element.title.prototype=new b.Element.ElementBase,b.Element.desc=function(){},b.Element.desc.prototype=new b.Element.ElementBase,b.Element.MISSING=function(e){b.log("ERROR: Element '"+e.nodeName+"' not yet implemented.")},b.Element.MISSING.prototype=new b.Element.ElementBase,b.CreateElement=function(t){var a=t.nodeName.replace(/^[^:]+:/,"");a=a.replace(/\-/g,"");var n=null;return n="undefined"==typeof b.Element[a]?new b.Element.MISSING(t):new b.Element[a](t),n.type=t.nodeName,n},b.load=function(e,t){b.loadXml(e,b.ajax(t))},b.loadXml=function(e,t){b.loadXmlDoc(e,b.parseXml(t))},b.loadXmlDoc=function(t,a){b.init(t);var n=function(a){for(var n=t.canvas;n;)a.x-=n.offsetLeft,a.y-=n.offsetTop,n=n.offsetParent;return o.scrollX&&(a.x+=o.scrollX),o.scrollY&&(a.y+=o.scrollY),a};!0!=b.opts.ignoreMouse&&(t.canvas.onclick=function(t){var e=n(new b.Point(null==t?event.clientX:t.clientX,null==t?event.clientY:t.clientY));b.Mouse.onclick(e.x,e.y)},t.canvas.onmousemove=function(t){var e=n(new b.Point(null==t?event.clientX:t.clientX,null==t?event.clientY:t.clientY));b.Mouse.onmousemove(e.x,e.y)});var r=b.CreateElement(a.documentElement);r.root=!0,r.addStylesFromStyleDefinition();var e=!0,l=function(){b.ViewPort.Clear(),t.canvas.parentNode?b.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight):b.ViewPort.SetCurrent(p,m),!0!=b.opts.ignoreDimensions&&(r.style("width").hasValue()&&(t.canvas.width=r.style("width").toPixels("x"),t.canvas.style&&(t.canvas.style.width=t.canvas.width+"px")),r.style("height").hasValue()&&(t.canvas.height=r.style("height").toPixels("y"),t.canvas.style&&(t.canvas.style.height=t.canvas.height+"px")));var n=t.canvas.clientWidth||t.canvas.width,l=t.canvas.clientHeight||t.canvas.height;if(!0==b.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(n=r.style("width").toPixels("x"),l=r.style("height").toPixels("y")),b.ViewPort.SetCurrent(n,l),null!=b.opts.offsetX&&(r.attribute("x",!0).value=b.opts.offsetX),null!=b.opts.offsetY&&(r.attribute("y",!0).value=b.opts.offsetY),null!=b.opts.scaleWidth||null!=b.opts.scaleHeight){var o=null,s=null,u=b.ToNumberArray(r.attribute("viewBox").value);null!=b.opts.scaleWidth&&(r.attribute("width").hasValue()?o=r.attribute("width").toPixels("x")/b.opts.scaleWidth:!isNaN(u[2])&&(o=u[2]/b.opts.scaleWidth)),null!=b.opts.scaleHeight&&(r.attribute("height").hasValue()?s=r.attribute("height").toPixels("y")/b.opts.scaleHeight:!isNaN(u[3])&&(s=u[3]/b.opts.scaleHeight)),null==o&&(o=s),null==s&&(s=o),r.attribute("width",!0).value=b.opts.scaleWidth,r.attribute("height",!0).value=b.opts.scaleHeight,r.style("transform",!0,!0).value+=" scale("+1/o+","+1/s+")"}!0!=b.opts.ignoreClear&&t.clearRect(0,0,n,l),r.render(t),e&&(e=!1,"function"==typeof b.opts.renderCallback&&b.opts.renderCallback(a))},s=!0;b.ImagesLoaded()&&(s=!1,l()),b.intervalID=setInterval(function(){var e=!1;if(s&&b.ImagesLoaded()&&(s=!1,e=!0),!0!=b.opts.ignoreMouse&&(e|=b.Mouse.hasEvents()),!0!=b.opts.ignoreAnimation)for(var t=0;t<b.Animations.length;t++)e|=b.Animations[t].update(1e3/b.FRAMERATE);"function"==typeof b.opts.forceRedraw&&!0==b.opts.forceRedraw()&&(e=!0),e&&(l(),b.Mouse.runEvents())},1e3/b.FRAMERATE)},b.stop=function(){b.intervalID&&clearInterval(b.intervalID)},b.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(e,t){this.events.push({type:"onclick",x:e,y:t,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(e,t){this.events.push({type:"onmousemove",x:e,y:t,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,a){for(var n,e=0;e<this.events.length;e++)n=this.events[e],a.isPointInPath&&a.isPointInPath(n.x,n.y)&&(this.eventElements[e]=t)},this.checkBoundingBox=function(t,a){for(var n,e=0;e<this.events.length;e++)n=this.events[e],a.isPointInBox(n.x,n.y)&&(this.eventElements[e]=t)},this.runEvents=function(){b.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var a=this.events[t],e=this.eventElements[t];e;)a.run(e),e=e.parent;this.events=[],this.eventElements=[]}},b}var o,s,u,d=!1,p=800,m=600;o=window;o.DOMParser||(o.DOMParser=a(22).DOMParser);var h,y=function(e,t,a){if(null==e&&null==t&&null==a){for(var n=document.querySelectorAll("svg"),r=0;r<n.length;r++){var o=n[r],s=document.createElement("canvas");s.width=o.clientWidth,s.height=o.clientHeight,o.parentNode.insertBefore(s,o),o.parentNode.removeChild(o);var u=document.createElement("div");u.appendChild(o),y(s,u.innerHTML)}return}var d=l(a||{});"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop(),e.childNodes&&1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=d);var p=e.getContext("2d");"undefined"==typeof t.documentElement?"<"==t.substr(0,1)?d.loadXml(p,t):d.load(p,t):d.loadXmlDoc(p,t)};"undefined"==typeof Element.prototype.matches?"undefined"==typeof Element.prototype.webkitMatchesSelector?"undefined"==typeof Element.prototype.mozMatchesSelector?"undefined"==typeof Element.prototype.msMatchesSelector?"undefined"==typeof Element.prototype.oMatchesSelector?(("function"==typeof jQuery||"function"==typeof Zepto)&&(h=function(e,t){return $(e).is(t)}),"undefined"==typeof h&&(h=Sizzle.matchesSelector)):h=function(e,t){return e.oMatchesSelector(t)}:h=function(e,t){return e.msMatchesSelector(t)}:h=function(e,t){return e.mozMatchesSelector(t)}:h=function(e,t){return e.webkitMatchesSelector(t)}:h=function(e,t){return e.matches(t)};var c=/(\[[^\]]+\])/g,f=/(#[^\s\+>~\.\[:]+)/g,g=/(\.[^\s\+>~\.\[:]+)/g,x=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,b=/(:[\w-]+\([^\)]*\))/gi,v=/(:[^\s\+>~\.\[:]+)/g,E=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(e,t,a,n,r,l){var o={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:t,offsetY:a,scaleWidth:n,scaleHeight:r};for(var s in l)l.hasOwnProperty(s)&&(o[s]=l[s]);y(this.canvas,e,o)}),y})},function(e){e.exports=require("rgbcolor")},function(e){e.exports=require("stackblur")},function(e){e.exports=require("jsdom")},function(e){e.exports=require("xmldom")},function(e){e.exports=require("downloads-folder")},function(e){e.exports=require("electron-canvas-to-buffer")},function(e){e.exports=require("path")},function(e){e.exports=require("fs")},function(e){e.exports=require("electron")}],[6]);